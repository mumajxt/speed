(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-db0602b4"],{"7c47":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"records-container new_records",attrs:{id:"view_new"}},[a("div",{staticClass:"short_info"},[e.loading?a("p",[a("Loading",[e._v("加载中...")])],1):a("p",[e.recordsInRankOut.length>0?a("span",[e._v(" 共"),a("span",{staticClass:"yellow",domProps:{textContent:e._s(e.totalCount)}}),e._v("条记录， "),a("span",{staticClass:"yellow"},[e._v("黄色")]),e._v("记录为当前类型在榜记录 ")]):a("span",[e._v("暂无历史记录~")])])]),e.recordsInRankOut.length>0?a("div",[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.load,expression:"load"}],staticClass:"table card",attrs:{"infinite-scroll-disabled":"disabled","infinite-scroll-distance":"200","infinite-scroll-immediate":"true"}},[a("div",{staticClass:"table-title"},[a("span",{staticClass:"table-title-border bg-yellow"}),a("h3",[e._v("历史记录")]),a("span",{staticClass:"table-title-info grey"},[e.screenTrack||e.screenPlayer||e.screenCar?a("span",[e._v("筛选出"),a("span",{staticClass:"yellow",domProps:{textContent:e._s(e.screenCount)}}),e._v("条记录")]):e._e()])]),a("div",{staticClass:"th"},[a("div",{staticClass:"track_name th-btn",class:e.screenTrack?"yellow":"",on:{click:function(t){e.isShowDrawerChoseTrack=!0}}},[a("span",{domProps:{textContent:e._s(e.screenTrack?e.screenTrack.name:"地图")}},[e._v("地图")]),a("i",{staticClass:"iconfont iconFilter",class:e.screenTrack?"yellow":"grey2"})]),a("div",{staticClass:"time th-btn",class:{yellow:"timeUp"==e.orderBy||"timeDown"==e.orderBy},on:{click:function(t){return e.clickOrderTime()}}},[a("span",[e._v("记录")]),a("i",{staticClass:"iconfont iconxiangxia",class:"timeUp"==e.orderBy?"rotate180":"timeDown"==e.orderBy?"yellow":"grey2"})]),a("div",{staticClass:"player_name th-btn",class:e.screenPlayer?"yellow":"",on:{click:function(t){e.isShowDrawerChosePlayer=!0}}},[a("span",{domProps:{textContent:e._s(e.screenPlayer?e.screenPlayer.name:"车手")}},[e._v("车手")]),a("i",{staticClass:"iconfont iconFilter",class:e.screenPlayer?"yellow":"grey2"})]),a("div",{staticClass:"car_name th-btn",class:e.screenCar?"yellow":"",on:{click:function(t){e.isShowDrawerChoseCar=!0}}},[a("span",{domProps:{textContent:e._s(e.screenCar?e.screenCar.name:"赛车")}},[e._v("赛车")]),a("i",{staticClass:"iconfont iconFilter",class:e.screenCar?"yellow":"grey2"})]),a("div",{staticClass:"pet_name"},[e._v("宠物")]),a("div",{staticClass:"ecu_name"},[e._v("ECU")]),a("div",{staticClass:"date th-btn",class:{yellow:"dateUp"==e.orderBy||"dateDown"==e.orderBy},on:{click:function(t){return e.clickOrderDate()}}},[a("span",[e._v("日期")]),a("i",{staticClass:"iconfont iconxiangxia",class:"dateUp"==e.orderBy?"rotate180":"dateDown"==e.orderBy?"":"grey2"})])]),e._l(e.records,(function(t){return a("div",{key:t.id,staticClass:"tr",on:{click:function(a){return e.$emit("showDetail",t)}}},[a("div",{staticClass:"track_name",domProps:{textContent:e._s(t.track.name)}},[e._v("地图")]),a("div",{staticClass:"time",class:t.isIn?"yellow":"grey"},[a("span",{class:{url:t.videoUrl},domProps:{textContent:e._s(t.time)}})]),a("div",{staticClass:"player_name",domProps:{textContent:e._s(t.player.name)}},[e._v("车手")]),a("div",{staticClass:"car_name",domProps:{textContent:e._s(t.car.name)}},[e._v("赛车")]),a("div",{staticClass:"pet_name"},[t.pet?a("span",{domProps:{textContent:e._s(t.pet.name)}}):a("span",{staticClass:"grey2"},[e._v("无宠")])]),a("div",{staticClass:"ecu_name"},[t.ecu?a("span",{domProps:{textContent:e._s(t.ecu.name)}}):a("span",{staticClass:"grey2"},[e._v("无E")])]),a("div",{staticClass:"date",domProps:{textContent:e._s(t.date)}},[e._v("日期")])])}))],2)]):e._e(),e.isShowDrawerChoseTrack?a("UserDrawerChoseTrack",{attrs:{trackOut:e.screenTrack,type:e.type,pet:e.pet,ecu:e.ecu},on:{close:function(t){e.isShowDrawerChoseTrack=!1},choseTrack:e.choseTrack}}):e._e(),e.isShowDrawerChosePlayer?a("UserDrawerChosePlayer",{attrs:{playerOut:e.screenPlayer,type:e.type,pet:e.pet,ecu:e.ecu},on:{close:function(t){e.isShowDrawerChosePlayer=!1},chosePlayer:e.chosePlayer}}):e._e(),e.isShowDrawerChoseCar?a("UserDrawerChoseCar",{attrs:{carOut:e.screenCar,type:e.type,pet:e.pet,ecu:e.ecu},on:{close:function(t){e.isShowDrawerChoseCar=!1},choseCar:e.choseCar}}):e._e(),a("div",{staticClass:"short_info center"},[e.loading?a("Loading",[e._v("加载中...")]):e._e()],1)],1)},s=[],n=(a("99af"),a("4160"),a("d3b7"),a("159b"),{name:"ViewNew",components:{UserDrawerChoseTrack:function(){return a.e("chunk-ff70bd6a").then(a.bind(null,"e60f"))},UserDrawerChosePlayer:function(){return a.e("chunk-31f6985c").then(a.bind(null,"5f7a"))},UserDrawerChoseCar:function(){return a.e("chunk-3fd7620b").then(a.bind(null,"0760"))},Loading:function(){return Promise.resolve().then(a.bind(null,"3a5e"))}},props:{type:String,pet:String,ecu:String,screenTrackOut:Object,screenPlayerOut:Object,screenCarOut:Object,searchKey:String,recordsInRankOut:Array},created:function(){this.screenTrack=this.screenTrackOut,this.screenPlayer=this.screenPlayerOut,this.screenCar=this.screenCarOut,this.initData()},watch:{type:{handler:function(){this.initData()}},pet:{handler:function(){this.initData()}},ecu:{handler:function(){this.initData()}},searchKey:{handler:function(e){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.initData,1e3)}},screenTrackOut:function(e){this.choseTrack(e)},screenPlayerOut:function(e){this.chosePlayer(e)},screenCarOut:function(e){this.choseCar(e)}},computed:{noMore:function(){return this.pageBean.records.length<this.pageBean.pageSize},disabled:function(){return this.loading||this.noMore}},data:function(){return{loading:!1,timer:null,pageBean:{totalCount:0,screenCount:0,totalPage:0,currentPage:1,pageSize:16,records:[]},totalCount:0,screenCount:0,records:[],screenTrack:null,screenCar:null,screenPlayer:null,orderBy:"dateDown",isShowDrawerChoseTrack:!1,isShowDrawerChoseCar:!1,isShowDrawerChosePlayer:!1}},methods:{initData:function(){this.records=[],this.pageBean.currentPage=1,this.listRecentRecords()},listRecentRecords:function(){var e=this;this.loading=!0,console.log("加载历史记录数据...");var t={type:this.type,pet:this.pet,ecu:this.ecu,currentPage:this.pageBean.currentPage,pageSize:this.pageBean.pageSize,searchKey:this.searchKey,trackId:this.screenTrack?this.screenTrack.id:null,playerId:this.screenPlayer?this.screenPlayer.id:null,carId:this.screenCar?this.screenCar.id:null,orderBy:this.orderBy};this.$axios({method:"get",url:"/api/recentRecords",params:t}).then((function(t){var a=t.data;a.flag?(e.pageBean=a.data,console.log("--------------------------"),console.log("返回第"+e.pageBean.currentPage+"页记录"),console.log(e.pageBean),console.log("--------------------------"),e.pageBean.records.forEach((function(t){e.recordsInRankOut.forEach((function(e){e.id==t.id&&(t.isIn=!0)}))})),e.records=e.records.concat(e.pageBean.records),1==e.pageBean.currentPage&&(e.totalCount=e.pageBean.totalCount,e.screenCount=e.pageBean.screenCount)):console.log(a.errorMsg),e.loading=!1})).catch((function(t){console.error(t),e.loading=!1}))},load:function(){this.pageBean.currentPage++,this.listRecentRecords()},choseTrack:function(e){this.screenTrack=e,this.pageBean.currentPage=1,this.initData()},chosePlayer:function(e){this.screenPlayer=e,this.pageBean.currentPage=1,this.initData()},choseCar:function(e){this.screenCar=e,this.pageBean.currentPage=1,this.initData()},clickOrderTime:function(){"timeUp"==this.orderBy?this.orderBy="timeDown":"timeDown"==this.orderBy?this.orderBy="timeUp":this.orderBy="timeDown",this.initData()},clickOrderDate:function(){"dateUp"==this.orderBy?this.orderBy="dateDown":"dateDown"==this.orderBy?this.orderBy="dateUp":this.orderBy="dateDown",this.initData()},clearScreen:function(){this.screenTrack=null,this.screenPlayer=null,this.screenCar=null,this.pageBean.currentPage=1,this.initData()}}}),i=n,c=(a("9cfe"),a("2877")),o=Object(c["a"])(i,r,s,!1,null,"7fdef382",null);t["default"]=o.exports},"9cfe":function(e,t,a){"use strict";a("a9da")},a9da:function(e,t,a){}}]);
//# sourceMappingURL=chunk-db0602b4.f82f3536.js.map